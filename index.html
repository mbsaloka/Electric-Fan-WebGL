<!DOCTYPE html>
<html>
<head>
    <title>Electric Fan WebGL</title>
</head>

<body>

    <div>
        Body Rotation 0 <input id="slider0" type="range" min="0" max="360" step="10" value="0" />
        360
    </div><br />

    <div>
        Head Tilt -15 <input id="slider1" type="range" min="-15" max="30" step="10" value="0" />
        30
    </div><br />

    <div>
        Head Pan -90 <input id="slider2" type="range" min="-90" max="90" step="10" value="0" />
        90
    </div><br />

    <div>
        <input id="checkbox0" type="checkbox" value="0">
        <label for="checkbox">Turn On/Off Fan</label>
    </div>

    <div>
        <input id="checkbox1" type="checkbox" value="0">
        <label for="checkbox">Turn On/Off Panning</label>
    </div>

    <canvas id="gl-canvas" width="512"" height=" 512"> </canvas>

<script id="vertex-shader" type="x-shader/x-vertex">
#version 300 es

in vec4 aPosition;
in vec4 aColor;
in vec2 aTexCoord;
in vec3 aNormal;

out vec4 vColor;
out vec2 vTexCoord;

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform vec4 uAmbientProduct, uDiffuseProduct, uSpecularProduct;
uniform vec4 uLightPosition;
uniform float uShininess;

void main()
{
    vec3 pos = -(modelViewMatrix * aPosition).xyz;

    //fixed light postion

    vec3 light = uLightPosition.xyz;
    vec3 L = normalize(light - pos);


    vec3 E = normalize(-pos);
    vec3 H = normalize(L + E);

    vec4 NN = vec4(aNormal,0);

    // Transform vertex normal into eye coordinates

    vec3 N = normalize((modelViewMatrix*NN).xyz);

    // Compute terms in the illumination equation
    vec4 ambient = uAmbientProduct;

    float Kd = max(dot(L, N), 0.0);
    vec4  diffuse = Kd*uDiffuseProduct;

    float Ks = pow( max(dot(N, H), 0.0), uShininess );
    vec4  specular = Ks * uSpecularProduct;

    if( dot(L, N) < 0.0 ) {
	  specular = vec4(0.0, 0.0, 0.0, 1.0);
    }

    // vColor = aColor;
    vTexCoord = aTexCoord;
    gl_Position = projectionMatrix * modelViewMatrix * aPosition;
    vColor = (ambient + diffuse + specular) * aColor;
    vColor.a = 1.0;
}
</script>

<script id="fragment-shader" type="x-shader/x-fragment">
#version 300 es

precision mediump float;

in vec4 vColor;
in vec2 vTexCoord;

out vec4 fColor;

uniform sampler2D uTextureMap;

void main()
{
    fColor = vColor*texture(uTextureMap, vTexCoord);
}
</script>

<script src="initShaders.js"></script>
<script src="MVnew.js"></script>
<script src="script.js"></script>

</body>

</html>